{#
Renders a list of resources with icons and view links.

resources - A list of resources to render
pkg - A package object that the resources belong to.

Example:

{% snippet "package/snippets/resources_list.html", pkg=pkg, resources=pkg.resources %}

#}
{% macro resource_table(resources) %}
    <div class="row">
        {% for res in resources %}
            <div class="{% if resources|length <= 3 %}col-sm-12{% else %}col-sm-6{% endif %}">
                <div class="dataset-resource">
                    <div class="dataset-resource-format col-md-2">
                        <i class="fa fa-file-text-o" aria-hidden="true"></i>
                        <span class="format-name">
                            {% filter upper %}
                                {{ res.get('format','') }}
                            {% endfilter %}
                        </span>
                    </div>
                    <div class="dataset-resource-text col-md-7">

                        {{res.get('date','')}}

                        {% if res.get('description') %}
                            <div>
                                {{res.get('description')|truncate(120)}}
                            </div>
                        {% else %}
                            <div>
                                {{h.resource_display_name(res)|truncate(60)}}
                            </div>
                        {% endif %}
                    </div>
                    <div class="dataset-resource-buttons col-md-3">
                        <a class="btn btn-lg btn-info btn-block" href="{{h.url_for(controller='package', action='resource_read', id=c.pkg_dict['name'], resource_id=res['id'])}}">
                            {% if res.has_views %}
                                Preview
                                <i class="fa fa-eye" aria-hidden="true"></i>
                            {% else %}
                                Details
                                <i class="fa fa-search" aria-hidden="true"></i>
                            {% endif %}

                        </a>
                        <a target="_blank" class="btn btn-lg btn-primary btn-block btn-download" href="{{res.get('url', '')}}">
                            Download
                            <i class="fa fa-download" aria-hidden="true"></i>&nbsp;
                        </a>
                    </div><!--/dropdown-->
                </div><!-- /dataset-resource -->
            </div><!-- /col-sm-6 -->
        {% endfor %}

    </div>
{% endmacro %}


<section id="dataset-resources" class="resources">
    <h2>{{ _('Data Resources') }} ({{resources|length}})</h2>
    {{resource_table(resources)}}
</section>
